# Payroll System (급여관리 시스템)


## 급여관리 시스템 기본 명세 
- 몇몇 직원은 시간제로 일함. 직원 레코드의 한 필드인 시급(hourly rate)에 따라 임금을 받는다.
    - 매일 날짜와 일한 시간을 기록한 타임카드를 제출하는데, 하루에 8시간 이상 일하면 초과근무 시간에 대해서 1.5배를 받는다.
    - 맴주 금요일마다 임금을 받는다.
- 몇몇 직원은 고정된 월급을 받는다. 
    - 매달 마지막 평일에 임금을 받는다.
    - 월급액수는 직원 레코드의 한 필드가 된다.
    - 월급을 받는 직원 중 일부는 별도의 판매량에 기반을 둔 수수료(commision)을 받는다. 이들은 날짜와 판매량이 기록된 판매 영수증을 제출한다. 수수료율은 직원 레코드의 한 필드가 된다. 이들은 격주로 금요일마다 임금을 받는다.
- 직원들은 임금을 받는 방법을 선택할 수 있다.
    - 자신이 선택한 우편 주소로 급료 지급수표를 우송받을 수도 있고
    - 급여 담당자(Paymaster)에게 맡겨 놓았다가 찾아갈 수 있고
    - 자신이 선택한 은행 계좌로 직접 입금하게 될 수도 있다. 
- 몇몇 직원은 조합에 속해 있다. 이들의 직원 레코드에는 주당 조합비 비율을 나타내는 필드가 있고, 이 조합비는 임금에서 공제되어야 한다. 또한 조합은 가끔 조합원 개인에게 공제액을 부과할 수도 있다. 이 공제액은 주 단위로 조합에 의해 제출되며, 해당 직원의 다음달 임금에서 공제되어야 한다. 
- 급여 관리 애플리케이션은 평일에 한 번씩 실행되고 해당 직원에게 그날 임금을 지급한다. 이 시스템은 직원이 임금을 받을 날짜를 입력받아, 지정된 날짜 전에 마지막으로 임금을 받은 날부터 지정된 날짜까지의 임금을 계산한다.


## 적용할 디자인 패턴 
- 커맨드와 액티브 오브젝트 패턴
- 템플릿 메서드와 스트레티지 패턴 (상속,위임)
- 퍼사드 패턴
- 싱글톤과 모노트스테이트 패턴
- 널오브젝트 패턴


## 유스케이스
### 1. 새직원 추가하기 
새로운 직원은 AddEmp 트랜잭션을 받는 것으로 추가한다. 이 트랜잭션은 직원의 이름, 주소, 직원번호를 포함한다. 
```
AddEmp <직원번호> "<이름>" "<주소>" H <시급>
AddEmp <직원번호> "<이름>" "<주소>" S <월급>
AddEmp <직원번호> "<이름>" "<주소>" C <월급> <수수수로율>
```
이 직원의 레코드 필드는 적절한 값이 할당되어 생성된다.

**대안: 트랜잭션 구조에서의 에러** 

- 이 트랜잭션 구조가 부적합하다면, 에러 메세지를 출력하고 아무 동작도 하지 않는다. 

---

### 2. 직원 삭제하기

DelEmp 트랜잭션을 받으면 직원을 삭제한다. 

```
DelEmp <직원번호>
```

이 트랜잭션을 받으면 해당하는 직원 레코드가 삭제된다.

**대안: 유효하지 않거나 알 수 없는 직원번호**

- <직원번호> 필드가 맞게 구성되어 있지 않거나 유효한 직원 레코드를 가리키지 않으면, 이 트랜잭션은 에러메세지를 출력하고 아무 동작도 하지 않는다.



---

### 3. 타임카드 기록하기

TimeCard 트랜잭션을 받으면 시스템은 타임카드 레코드를 하나 생성하고, 이것을 해당하는 직원 레코드에 연결한다.

```
TimeCard <직원번호> <날짜> <시간>
```

**대안1: 선택된 직원이 시간제로 일하지 않는 경우**

- 시스템은 적절한 에러 메세지를 출력하고 더이상 동작은 취하지 않는다.

**대안2: 트랜잭션 구조에서의 에러**

- 시스템은 적절한 에러 메세지를 출력하고 더이상 동작은 취하지 않는다.



---

### 4. 판매 영수증 기록하기

SalesReceipt 트랜잭션을 받으면 시스템은 새로운 판매 영수증 레코드를 하나 생성하고, 이것을 해당하는 직원에게 연결한다. 

```
SalesReceipt <직원번호> <날짜> <액수> 
```

**대안1: 선택된 직원이 판매 수수료를 따로 받는 직원이 아닌 경우**

- 시스템은 적절한 에러 메세지를 출력하고 더이상 동작은 취하지 않는다.

**대안2: 트랜잭션 구조에서의 에러**

- 시스템은 적절한 에러 메세지를 출력하고 더이상 동작은 취하지 않는다.

---

### 5. 조합 공제액 기록하기

이 트랜잭션을 받으면 시스템은 공제액 레코드를 하나 생성하고, 이것을 해당하는 조합원 레코드에 연결한다.

```
ServiceCharge <직원번호> <액수>
```

**대안: 형식을 지키지 않은 트랜잭션**

트랜잭션이 형식을 지키지 않았거나 <직원번호>가 실제로 존재하는 조합원을 가리키지 않으면, 이 트랜잭션은 적절한 에러메세지와 함께 출력된다.

---

### 6. 직원 정보 변경하기 

이 트랜잭션을 받으면 시스템은 해당하는 직원 레코드의 정보 중 하나를 변경한다. 이 트랜잭션에는 다양한 변형이 있을 수 있다.

```
ChangeEmp <직원번호> Name <이름>							직원의 이름을 변경한다.
ChangeEmp <직원번호> Address <주소>						직원의 주소를 변경한다.
ChangeEmp <직원번호> Hourly <시급>					    시급을 받는 것으로 변경한다.
ChangeEmp <직원번호> Salaried <월급>						월급을 받는 것으로 변경한다.
ChangeEmp <직원번호> Commisioned <월급> <비율>			   수수료를 받는 것으로 변경한다.
ChangeEmp <직원번호> Hold						         급여담당자에게 맡겨놓는다.
ChangeEmp <직원번호> Direct <은행> <계좌>				   직접 입금을 받는다.
ChangeEmp <직원번호> Mail <주소>							우편으로 받는다.
ChangeEmp <직원번호> Member <조합원번호> Dues <조합비 비율> 	직원을 조합에 넣는다.
ChangeEmp <직원번호> NoMember							 직원을 조합에서 뺀다.
```

**대안: 트랜잭션 에러**

이 트랜잭션의 구조가 정상적이 아니거나 <직원번호>가 실제 직원을 가리키지 않거나 또는 <조합원번호>가 이미 조합원을 가리키고 있다면, 적합한 에러를 출력하고 더 이상의 동작을 취하지 않는다.

---

### 7. 당일을 위한 급여 프로그램 실행하기

Payday 트랜잭션을 받으면, 시스템은 지정된 날짜에 임금을 받아야할 직원을 모두 가려낸다. 그리고 이들이 얼마의 액수를 받아야 하는지 결정하고, 이들이 선택한 지급방식으로 임금을 지급한다. 

```
Payday <날짜>
```



